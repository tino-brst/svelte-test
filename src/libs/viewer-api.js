/*!
 * Copyright (c) 2021 by Vectary. All rights reserved.
 * Rev 948f4e068e5f9a2b14b36a7d3ba178758753c3d1
 * @copyright
 */
var Vectary=function(e){var t={};function a(i){if(t[i])return t[i].exports;var E=t[i]={i:i,l:!1,exports:{}};return e[i].call(E.exports,E,E.exports,a),E.l=!0,E.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var E in e)a.d(i,E,function(t){return e[t]}.bind(null,E));return i},a.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s="./src/viewer-api/scripts/vctr-api.ts")}({"./src/_common_/types.ts":function(e,t,a){"use strict";var i,E,s;a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return E})),a.d(t,"c",(function(){return s})),function(e){e[e["ERROR"]=0]="ERROR",e[e["READY"]=1]="READY",e[e["GET_OBJECTS"]=2]="GET_OBJECTS",e[e["GET_OBJECT_BY_NAME"]=3]="GET_OBJECT_BY_NAME",e[e["GET_OBJECTS_BY_NAME"]=4]="GET_OBJECTS_BY_NAME",e[e["GET_MESHES"]=5]="GET_MESHES",e[e["GET_MESH_BY_NAME"]=6]="GET_MESH_BY_NAME",e[e["GET_MESHES_BY_NAME"]=7]="GET_MESHES_BY_NAME",e[e["GET_HIT_OBJECTS"]=8]="GET_HIT_OBJECTS",e[e["GET_VISIBILITY"]=9]="GET_VISIBILITY",e[e["SET_VISIBILITY"]=10]="SET_VISIBILITY",e[e["GET_POSITION"]=11]="GET_POSITION",e[e["SET_POSITION_REL"]=12]="SET_POSITION_REL",e[e["SET_POSITION_ABS"]=13]="SET_POSITION_ABS",e[e["GET_ROTATION"]=14]="GET_ROTATION",e[e["SET_ROTATION_REL"]=15]="SET_ROTATION_REL",e[e["SET_ROTATION_ABS"]=16]="SET_ROTATION_ABS",e[e["GET_SCALE"]=17]="GET_SCALE",e[e["SET_SCALE_REL"]=18]="SET_SCALE_REL",e[e["SET_SCALE_ABS"]=19]="SET_SCALE_ABS",e[e["GET_MATERIALS"]=20]="GET_MATERIALS",e[e["SET_MATERIAL"]=21]="SET_MATERIAL",e[e["GET_MATERIALS_BY_NAME"]=22]="GET_MATERIALS_BY_NAME",e[e["GET_MATERIAL_BY_NAME"]=23]="GET_MATERIAL_BY_NAME",e[e["GET_MATERIAL_PROPS"]=24]="GET_MATERIAL_PROPS",e[e["CREATE_MATERIAL"]=25]="CREATE_MATERIAL",e[e["UPDATE_MATERIAL"]=26]="UPDATE_MATERIAL",e[e["GET_BACKGROUND"]=27]="GET_BACKGROUND",e[e["SET_BACKGROUND"]=28]="SET_BACKGROUND",e[e["GET_EXPOSURE"]=29]="GET_EXPOSURE",e[e["SET_EXPOSURE"]=30]="SET_EXPOSURE",e[e["GET_ENVIRONMENT_MAP"]=31]="GET_ENVIRONMENT_MAP",e[e["SET_ENVIRONMENT_MAP"]=32]="SET_ENVIRONMENT_MAP",e[e["ROTATE_ENVIRONMENT_MAP"]=33]="ROTATE_ENVIRONMENT_MAP",e[e["GET_CAMERAS"]=34]="GET_CAMERAS",e[e["GET_CAMERAS_BY_NAME"]=35]="GET_CAMERAS_BY_NAME",e[e["GET_CAMERA_BY_NAME"]=36]="GET_CAMERA_BY_NAME",e[e["SWITCH_VIEW"]=37]="SWITCH_VIEW",e[e["SWITCH_VIEW_ASYNC"]=38]="SWITCH_VIEW_ASYNC",e[e["MOVE_VIEW"]=39]="MOVE_VIEW",e[e["ROTATE_VIEW"]=40]="ROTATE_VIEW",e[e["ZOOM_VIEW"]=41]="ZOOM_VIEW",e[e["GET_FOV"]=42]="GET_FOV",e[e["SET_FOV"]=43]="SET_FOV",e[e["TAKE_SCREENSHOT"]=44]="TAKE_SCREENSHOT",e[e["ENABLE_ANNOTATIONS"]=45]="ENABLE_ANNOTATIONS",e[e["GET_ANNOTATIONS"]=46]="GET_ANNOTATIONS",e[e["GET_ANNOTATION_BY_ID"]=47]="GET_ANNOTATION_BY_ID",e[e["ADD_ANNOTATION"]=48]="ADD_ANNOTATION",e[e["REMOVE_ANNOTATION_BY_ID"]=49]="REMOVE_ANNOTATION_BY_ID",e[e["EXPAND_ANNOTATIONS_BY_ID"]=50]="EXPAND_ANNOTATIONS_BY_ID",e[e["HIGHLIGHT_MESHES_BY_NAME"]=51]="HIGHLIGHT_MESHES_BY_NAME",e[e["UNHIGHLIGHT_MESHES_BY_NAME"]=52]="UNHIGHLIGHT_MESHES_BY_NAME",e[e["SET_CANVAS_STATE"]=53]="SET_CANVAS_STATE",e[e["GET_VIEW_STATE"]=54]="GET_VIEW_STATE",e[e["APPLY_VIEW_STATE"]=55]="APPLY_VIEW_STATE",e[e["SEND_EVENT"]=56]="SEND_EVENT",e[e["PLAY"]=57]="PLAY",e[e["LOAD"]=58]="LOAD",e[e["SET_UUID_AR"]=59]="SET_UUID_AR",e[e["TRIGGER_AR_CLICK"]=60]="TRIGGER_AR_CLICK",e[e["GET_2D_COORDINATES"]=61]="GET_2D_COORDINATES",e[e["GET_CURRENT_USER"]=62]="GET_CURRENT_USER",e[e["DID_RENDER_LAST_FRAME"]=63]="DID_RENDER_LAST_FRAME",e[e["ADD_EVENT_LISTENER"]=64]="ADD_EVENT_LISTENER",e[e["REMOVE_EVENT_LISTENER"]=65]="REMOVE_EVENT_LISTENER",e[e["UPDATE_EVENT"]=66]="UPDATE_EVENT"}(i||(i={})),function(e){e["ORBIT_CONTROLS_STATE_CHANGE"]="ORBIT_CONTROLS_STATE_CHANGE",e["MOUSE_MOVE"]="MOUSE_MOVE",e["MOUSE_CLICK"]="MOUSE_CLICK",e["MOUSE_DOWN"]="MOUSE_DOWN"}(E||(E={})),function(e){e["NONE"]="NONE",e["ROTATE"]="ROTATE",e["DOLLY"]="DOLLY",e["PAN"]="PAN",e["TOUCH_ROTATE"]="TOUCH_ROTATE",e["TOUCH_PAN"]="TOUCH_PAN",e["TOUCH_DOLLY_PAN"]="TOUCH_DOLLY_PAN",e["TOUCH_DOLLY_ROTATE"]="TOUCH_DOLLY_ROTATE"}(s||(s={}))},"./src/viewer-api/scripts/vctr-api.ts":function(e,t,a){"use strict";a.r(t),a.d(t,"VctrApi",(function(){return s}));var i=a("./src/_common_/types.ts"),E=void 0&&(void 0).__awaiter||function(e,t,a,i){function E(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function n(e){try{_(i.next(e))}catch(e){s(e)}}function r(e){try{_(i["throw"](e))}catch(e){s(e)}}function _(e){e.done?a(e.value):E(e.value).then(n,r)}_((i=i.apply(e,t||[])).next())}))};class s{constructor(e,t){this.isReady=!1,this.iframeMsgMap=new Map,this.eventsCallbackMap=new Map,this.id=e,this.globalErrCb=t,s.Utils=new n(this)}init(){return new Promise((e,t)=>E(this,void 0,void 0,(function*(){if(this.elem=document.getElementById(this.id),!this.elem){const a=`Element with id "${this.id}" does not exist`;return this.globalErrCb?this.globalErrCb(a):t(a),e()}if(this.type="IFRAME"===this.elem.nodeName?"iframe":"VCTR-VIEWER"===this.elem.nodeName?"webcomponent":null,!this.type){const a=`Element with id "${this.id}" is not of an appropriate type`;return this.globalErrCb?this.globalErrCb(a):t(a),e()}switch(this.type){case"iframe":this.initIframeMessenger();default:yield this.getReady(),e()}})))}getReady(){return new Promise((e,t)=>{const a=this.getRandomNum(),E=self.setInterval(()=>{if("iframe"===this.type)this.iframeMsgMap.set(a,{err:null,succ:null}),this.elem.contentWindow.postMessage({id:this.id,msgId:a,method:i["b"].READY},"*");else{const e=this.elem.isReady();e&&(this.isReady=!0)}this.isReady&&(self.clearInterval(E),e())},500)})}getObjects(){return this.apiCallInternal(i["b"].GET_OBJECTS)}getMeshes(){return this.apiCallInternal(i["b"].GET_MESHES)}getObjectsByName(e){return this.apiCallInternal(i["b"].GET_OBJECTS_BY_NAME,{name:e})}getObjectByName(e){return this.apiCallInternal(i["b"].GET_OBJECT_BY_NAME,{name:e})}getMeshesByName(e){return this.apiCallInternal(i["b"].GET_MESHES_BY_NAME,{name:e})}getMeshByName(e){return this.apiCallInternal(i["b"].GET_MESH_BY_NAME,{name:e})}getHitObjects(e=!1){return this.apiCallInternal(i["b"].GET_HIT_OBJECTS,{firstHitOnly:e})}get2DCoordinates(e){return this.apiCallInternal(i["b"].GET_2D_COORDINATES,{name:e})}getCameras(){return this.apiCallInternal(i["b"].GET_CAMERAS)}getCamerasByName(e){return this.apiCallInternal(i["b"].GET_CAMERAS_BY_NAME,{name:e})}getCameraByName(e){return this.apiCallInternal(i["b"].GET_CAMERA_BY_NAME,{name:e})}switchView(e){return this.apiCallInternal(i["b"].SWITCH_VIEW,{name:e})}switchViewAsync(e){return this.apiCallInternal(i["b"].SWITCH_VIEW_ASYNC,{name:e})}moveView(e){return this.apiCallInternal(i["b"].MOVE_VIEW,{position:e})}rotateView(e){return this.apiCallInternal(i["b"].ROTATE_VIEW,{rotation:e})}zoomView(e){return this.apiCallInternal(i["b"].ZOOM_VIEW,{zoom:e})}getVisibility(e){return this.apiCallInternal(i["b"].GET_VISIBILITY,{name:e})}setVisibility(e,t=!0,a=!1){return this.apiCallInternal(i["b"].SET_VISIBILITY,{names:e,visible:t,isExclusive:a})}getMaterials(){return this.apiCallInternal(i["b"].GET_MATERIALS)}createMaterial(e,t){return this.apiCallInternal(i["b"].CREATE_MATERIAL,{material:e,cloneFromMatName:t})}updateMaterial(e,t,a=!0){return this.apiCallInternal(i["b"].UPDATE_MATERIAL,{name:e,props:t,withPrefetch:a})}setMaterial(e,t){return this.apiCallInternal(i["b"].SET_MATERIAL,{objectName:e,materialName:t})}getMaterialsByName(e){return this.apiCallInternal(i["b"].GET_MATERIALS_BY_NAME,{name:e})}getMaterialByName(e){return this.apiCallInternal(i["b"].GET_MATERIAL_BY_NAME,{name:e})}getMaterialProperties(e){return this.apiCallInternal(i["b"].GET_MATERIAL_PROPS,{name:e})}getBackground(){return this.apiCallInternal(i["b"].GET_BACKGROUND)}setBackground(e){return this.apiCallInternal(i["b"].SET_BACKGROUND,{background:e})}enableAnnotations(e=!0){return this.apiCallInternal(i["b"].ENABLE_ANNOTATIONS,{enable:e})}getAnnotations(){return this.apiCallInternal(i["b"].GET_ANNOTATIONS)}getAnnotationById(e){return this.apiCallInternal(i["b"].GET_ANNOTATION_BY_ID,{id:e})}addAnnotation(e){return this.apiCallInternal(i["b"].ADD_ANNOTATION,{annotationConf:e})}removeAnnotationById(e){return this.apiCallInternal(i["b"].REMOVE_ANNOTATION_BY_ID,{id:e})}expandAnnotationsById(e,t,a=!0){return this.apiCallInternal(i["b"].EXPAND_ANNOTATIONS_BY_ID,{ids:e,expand:t,isExclusive:a})}getPosition(e){return this.apiCallInternal(i["b"].GET_POSITION,{name:e})}setPositionRelative(e,t){return this.apiCallInternal(i["b"].SET_POSITION_REL,{name:e,position:t})}setPositionAbsolute(e,t){return this.apiCallInternal(i["b"].SET_POSITION_ABS,{name:e,position:t})}getRotation(e){return this.apiCallInternal(i["b"].GET_ROTATION,{name:e})}setRotationRelative(e,t,a="XYZ"){return this.apiCallInternal(i["b"].SET_ROTATION_REL,{name:e,rotation:t,order:a})}setRotationAbsolute(e,t,a="XYZ"){return this.apiCallInternal(i["b"].SET_ROTATION_ABS,{name:e,rotation:t,order:a})}getScale(e){return this.apiCallInternal(i["b"].GET_SCALE,{name:e})}setScaleRelative(e,t){return this.apiCallInternal(i["b"].SET_SCALE_REL,{name:e,scale:t})}setScaleAbsolute(e,t){return this.apiCallInternal(i["b"].SET_SCALE_ABS,{name:e,scale:t})}highlightMeshesByName(e,t="#ffff00",a=1,E=!1){return this.apiCallInternal(i["b"].HIGHLIGHT_MESHES_BY_NAME,{names:e,color:t,intensity:a,isExclusive:E})}unhighlightMeshesByName(e){return this.apiCallInternal(i["b"].UNHIGHLIGHT_MESHES_BY_NAME,{names:e})}takeScreenshot(e=1,t){return this.apiCallInternal(i["b"].TAKE_SCREENSHOT,{scale:e,scissor:t})}getViewState(){return this.apiCallInternal(i["b"].GET_VIEW_STATE)}applyViewState(e){return this.apiCallInternal(i["b"].APPLY_VIEW_STATE,{state:e})}getExposure(){return this.apiCallInternal(i["b"].GET_EXPOSURE)}setExposure(e){return this.apiCallInternal(i["b"].SET_EXPOSURE,{exposure:e})}getEnvironmentMap(){return this.apiCallInternal(i["b"].GET_ENVIRONMENT_MAP)}setEnvironmentMap(e){return this.apiCallInternal(i["b"].SET_ENVIRONMENT_MAP,{envMap:e})}rotateEnvironmentMap(e){return this.apiCallInternal(i["b"].ROTATE_ENVIRONMENT_MAP,{rotation:e})}getFOV(){return this.apiCallInternal(i["b"].GET_FOV)}setFOV(e){return this.apiCallInternal(i["b"].SET_FOV,{fov:e})}sendEvent(e,t,a,E,s){return this.apiCallInternal(i["b"].SEND_EVENT,{event:e,x:t,y:a,maxX:E,maxY:s})}play(e,t){return this.apiCallInternal(i["b"].PLAY,{animIdx:e,timeScale:t})}load(){return this.apiCallInternal(i["b"].LOAD)}setUUIDAr(e){return this.apiCallInternal(i["b"].SET_UUID_AR,{uuid:e})}triggerARClick(){return this.apiCallInternal(i["b"].TRIGGER_AR_CLICK)}setCanvasState(e,t){return this.apiCallInternal(i["b"].SET_CANVAS_STATE,{className:e,state:t})}getCurrentUser(){return this.apiCallInternal(i["b"].GET_CURRENT_USER)}didRenderLastFrame(){return this.apiCallInternal(i["b"].DID_RENDER_LAST_FRAME)}addEventListener(e,t){return this.eventsCallbackMap.set(e,t),this.apiCallInternal(i["b"].ADD_EVENT_LISTENER,{eventType:e})}removeEventListener(e){return this.eventsCallbackMap.delete(e),this.apiCallInternal(i["b"].REMOVE_EVENT_LISTENER,{eventType:e})}apiCallInternal(e,t){return new Promise((a,s)=>E(this,void 0,void 0,(function*(){try{if("iframe"===this.type){const i=this.getRandomNum();this.iframeMsgMap.set(i,{err:this.globalErrCb?this.globalErrCb:s,succ:a}),this.elem.contentWindow.postMessage({id:this.id,msgId:i,method:e,data:t?JSON.stringify(t):void 0},"*")}else{let E;switch(e){case i["b"].GET_OBJECTS:E=this.elem.getObjects();break;case i["b"].GET_MESHES:E=this.elem.getMeshes();break;case i["b"].GET_OBJECTS_BY_NAME:E=this.elem.getObjectsByName(t.name);break;case i["b"].GET_OBJECT_BY_NAME:E=this.elem.getObjectByName(t.name);break;case i["b"].GET_MESHES_BY_NAME:E=this.elem.getMeshesByName(t.name);break;case i["b"].GET_MESH_BY_NAME:E=this.elem.getMeshByName(t.name);break;case i["b"].GET_MATERIALS:E=this.elem.getMaterials();break;case i["b"].CREATE_MATERIAL:E=this.elem.createMaterial(t.material,t.cloneFromMatName);break;case i["b"].UPDATE_MATERIAL:E=this.elem.updateMaterial(t.name,t.props,t.withPrefetch);break;case i["b"].SET_MATERIAL:E=this.elem.setMaterial(t.objectName,t.materialName);break;case i["b"].GET_MATERIALS_BY_NAME:E=this.elem.getMaterialsByName(t.name);break;case i["b"].GET_MATERIAL_BY_NAME:E=this.elem.getMaterialByName(t.name);break;case i["b"].GET_MATERIAL_PROPS:E=this.elem.getMaterialProperties(t.name);break;case i["b"].GET_HIT_OBJECTS:E=this.elem.getHitObjects(t.firstHitOnly);break;case i["b"].GET_2D_COORDINATES:E=this.elem.get2DCoordinates(t.name);break;case i["b"].GET_CAMERAS:E=this.elem.getCameras();break;case i["b"].GET_CAMERAS_BY_NAME:E=this.elem.getCamerasByName(t.name);break;case i["b"].GET_CAMERA_BY_NAME:E=this.elem.getCameraByName(t.name);break;case i["b"].SWITCH_VIEW:E=this.elem.switchView(t.name);break;case i["b"].SWITCH_VIEW_ASYNC:E=this.elem.switchViewAsync(t.name);break;case i["b"].MOVE_VIEW:E=this.elem.moveView(t.position);break;case i["b"].ROTATE_VIEW:E=this.elem.rotateView(t.rotation);break;case i["b"].ZOOM_VIEW:E=this.elem.zoomView(t.zoom);break;case i["b"].GET_VISIBILITY:E=this.elem.getVisibility(t.name);break;case i["b"].SET_VISIBILITY:E=this.elem.setVisibility(t.names,t.visible,t.isExclusive);break;case i["b"].GET_BACKGROUND:E=this.elem.getBackground();break;case i["b"].SET_BACKGROUND:E=yield this.elem.setBackground(t.background);break;case i["b"].ENABLE_ANNOTATIONS:E=yield this.elem.enableAnnotations(t.enable);break;case i["b"].GET_ANNOTATIONS:E=yield this.elem.getAnnotations();break;case i["b"].GET_ANNOTATION_BY_ID:E=yield this.elem.getAnnotationById(t.id);break;case i["b"].ADD_ANNOTATION:E=yield this.elem.addAnnotation(t.annotationConf);break;case i["b"].REMOVE_ANNOTATION_BY_ID:E=yield this.elem.removeAnnotationById(t.id);break;case i["b"].EXPAND_ANNOTATIONS_BY_ID:E=yield this.elem.expandAnnotationsById(t.ids,t.expand,t.isExclusive);break;case i["b"].GET_POSITION:E=this.elem.getPosition(t.name);break;case i["b"].SET_POSITION_REL:E=yield this.elem.setPositionRelative(t.name,t.position);break;case i["b"].SET_POSITION_ABS:E=yield this.elem.setPositionAbsolute(t.name,t.position);break;case i["b"].GET_ROTATION:E=this.elem.getRotation(t.name);break;case i["b"].SET_ROTATION_REL:E=yield this.elem.setRotationRelative(t.name,t.rotation,t.order);break;case i["b"].SET_ROTATION_ABS:E=yield this.elem.setRotationAbsolute(t.name,t.rotation,t.order);break;case i["b"].GET_SCALE:E=this.elem.getScale(t.name);break;case i["b"].SET_SCALE_REL:E=yield this.elem.setScaleRelative(t.name,t.scale);break;case i["b"].SET_SCALE_ABS:E=yield this.elem.setScaleAbsolute(t.name,t.scale);break;case i["b"].HIGHLIGHT_MESHES_BY_NAME:E=yield this.elem.highlightMeshesByName(t.names,t.color,t.intensity,t.isExclusive);break;case i["b"].UNHIGHLIGHT_MESHES_BY_NAME:E=yield this.elem.unhighlightMeshesByName(t.names);break;case i["b"].TAKE_SCREENSHOT:E=yield this.elem.takeScreenshot(t.scale,t.scissor);break;case i["b"].GET_VIEW_STATE:E=yield this.elem.getViewState();break;case i["b"].APPLY_VIEW_STATE:E=yield this.elem.applyViewState(t.state);break;case i["b"].GET_EXPOSURE:E=yield this.elem.getExposure();break;case i["b"].SET_EXPOSURE:E=yield this.elem.setExposure(t.exposure);break;case i["b"].GET_ENVIRONMENT_MAP:E=yield this.elem.getEnvironmentMap();break;case i["b"].SET_ENVIRONMENT_MAP:E=yield this.elem.setEnvironmentMap(t.envMap);break;case i["b"].ROTATE_ENVIRONMENT_MAP:E=yield this.elem.setEnvironmentMap(t.rotation);break;case i["b"].GET_FOV:E=yield this.elem.getFOV();break;case i["b"].SET_FOV:E=yield this.elem.setFOV(t.fov);break;case i["b"].SEND_EVENT:E=yield this.elem.sendEvent(t.event,t.x,t.y,t.maxX,t.maxY);break;case i["b"].PLAY:E=yield this.elem.play(t.animIdx,t.timeScale);break;case i["b"].LOAD:E=yield this.elem.load();break;case i["b"].SET_UUID_AR:E=yield this.elem.setUUIDAr(t.uuid);break;case i["b"].TRIGGER_AR_CLICK:E=yield this.elem.triggerARClick();break;case i["b"].SET_CANVAS_STATE:E=yield this.elem.setCanvasState(t.className,t.state);break;case i["b"].GET_CURRENT_USER:E=this.elem.getCurrentUser();break;case i["b"].DID_RENDER_LAST_FRAME:E=this.elem.didRenderLastFrame();break;case i["b"].ADD_EVENT_LISTENER:E=this.elem.addApiEventListner(t.eventType,this.eventsCallbackMap.get(t.eventType));break;case i["b"].REMOVE_EVENT_LISTENER:E=this.elem.removeApiEventListener(t.eventType);break}a(E)}}catch(e){this.globalErrCb?this.globalErrCb(e):s(e),a()}})))}initIframeMessenger(){self.addEventListener("message",e=>{const t=e.data,a=this.iframeMsgMap.get(t.msgId);if(a){switch(t.method){case i["b"].READY:"true"===t.data&&(this.isReady=!0);break;case i["b"].ERROR:a.err(t.data);break;case i["b"].GET_OBJECTS_BY_NAME:case i["b"].GET_OBJECT_BY_NAME:case i["b"].GET_CAMERAS_BY_NAME:case i["b"].GET_CAMERA_BY_NAME:case i["b"].GET_MESHES_BY_NAME:case i["b"].GET_MESH_BY_NAME:case i["b"].GET_MATERIALS_BY_NAME:case i["b"].GET_MATERIAL_BY_NAME:case i["b"].GET_MATERIAL_PROPS:case i["b"].CREATE_MATERIAL:case i["b"].UPDATE_MATERIAL:case i["b"].GET_VIEW_STATE:case i["b"].APPLY_VIEW_STATE:case i["b"].GET_ANNOTATIONS:case i["b"].GET_ANNOTATION_BY_ID:case i["b"].ADD_ANNOTATION:case i["b"].GET_CURRENT_USER:case i["b"].DID_RENDER_LAST_FRAME:try{const e=JSON.parse(t.data);a.succ(e)}catch(e){a.err(e)}break;case i["b"].SET_BACKGROUND:a.succ(!0);break;case i["b"].SWITCH_VIEW:case i["b"].SWITCH_VIEW_ASYNC:case i["b"].MOVE_VIEW:case i["b"].ROTATE_VIEW:case i["b"].ZOOM_VIEW:case i["b"].SET_POSITION_ABS:case i["b"].SET_ROTATION_ABS:case i["b"].SET_SCALE_ABS:case i["b"].SET_POSITION_REL:case i["b"].SET_ROTATION_REL:case i["b"].SET_SCALE_REL:case i["b"].SET_MATERIAL:case i["b"].GET_VISIBILITY:case i["b"].SET_VISIBILITY:case i["b"].ENABLE_ANNOTATIONS:case i["b"].REMOVE_ANNOTATION_BY_ID:case i["b"].EXPAND_ANNOTATIONS_BY_ID:case i["b"].HIGHLIGHT_MESHES_BY_NAME:case i["b"].UNHIGHLIGHT_MESHES_BY_NAME:case i["b"].SET_EXPOSURE:case i["b"].SET_ENVIRONMENT_MAP:case i["b"].ROTATE_ENVIRONMENT_MAP:case i["b"].SET_FOV:case i["b"].SEND_EVENT:case i["b"].PLAY:case i["b"].SET_UUID_AR:case i["b"].TRIGGER_AR_CLICK:case i["b"].SET_CANVAS_STATE:case i["b"].ADD_EVENT_LISTENER:case i["b"].REMOVE_EVENT_LISTENER:"true"===t.data?a.succ(!0):a.err("Something went wrong. API call result is false");break;case i["b"].GET_BACKGROUND:case i["b"].GET_POSITION:case i["b"].GET_ROTATION:case i["b"].GET_SCALE:case i["b"].GET_MATERIALS:case i["b"].GET_EXPOSURE:case i["b"].GET_FOV:case i["b"].GET_OBJECTS:case i["b"].GET_MESHES:case i["b"].GET_HIT_OBJECTS:case i["b"].GET_2D_COORDINATES:case i["b"].GET_CAMERAS:try{const e=JSON.parse(t.data);a.succ(e)}catch(e){a.err(e)}break;case i["b"].TAKE_SCREENSHOT:case i["b"].GET_ENVIRONMENT_MAP:case i["b"].LOAD:try{a.succ(t.data)}catch(e){a.err(e)}break;default:const e=`Unknown API event "${t.method}"`;this.globalErrCb?this.globalErrCb(e):void 0;break}this.iframeMsgMap.delete(t.msgId)}else if(t.method==i["b"].UPDATE_EVENT){let e=JSON.parse(t.data);if(this.eventsCallbackMap.has(e.eventType))this.eventsCallbackMap.get(e.eventType)(e.eventData);else{const t=`Missing callback for event: "${e.eventType}"`;this.globalErrCb?this.globalErrCb(t):void 0}}})}getRandomNum(){const e=new Uint8Array(4);return self.crypto.getRandomValues(e),`${e[0]}-${e[1]}-${e[2]}-${e[3]}`}}s.ApiEvents=i["a"];class n{constructor(e){this.api=e}animate(e,t,a,i=(()=>{})){const E=performance.now();let s,n=0;if("string"===typeof t)switch(t){case"linear":s=this.linear;break;case"easeInQuad":s=this.easeInQuad;break;case"easeOutQuad":s=this.easeOutQuad;break;case"easeInOutQuad":s=this.easeInOutQuad;break;case"easeInCubic":s=this.easeInCubic;break;case"easeOutCubic":s=this.easeOutCubic;break;case"easeInOutCubic":s=this.easeInOutCubic;break;case"easeInQuart":s=this.easeInQuart;break;case"easeOutQuart":s=this.easeOutQuart;break;case"easeInOutQuart":s=this.easeInOutQuart;break;case"easeInOutExpo":s=this.easeInOutExpo;break;default:s=this.linear;break}else s=t;function r(){if(n=performance.now()-E,n>=e)return a(s(1)),i(),void 0;let t=n/e;const _=s(t);a(_),requestAnimationFrame(r)}r()}lerp(e,t,a){let i=e.slice();return i[0]+=(t[0]-e[0])*a,i[1]+=(t[1]-e[1])*a,i[2]+=(t[2]-e[2])*a,i}linear(e){return e}easeInQuad(e){return e*e}easeOutQuad(e){return e*(2-e)}easeInOutQuad(e){return e<.5?2*e*e:-1+(4-2*e)*e}easeInCubic(e){return e*e*e}easeOutCubic(e){return--e*e*e+1}easeInOutCubic(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}easeInQuart(e){return e*e*e*e}easeOutQuart(e){return 1- --e*e*e*e}easeInOutQuart(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}easeInOutExpo(e){return e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}fadeOut(e,t){return E(this,void 0,void 0,(function*(){const a=yield this.api.getMeshByName(e);this.animate(t,this.easeOutQuad,e=>{const t=this.lerp([1,0,0],[0,0,0],e),i={opacity:`${t[0]}`};this.api.updateMaterial(a.material,i)},()=>{this.api.setVisibility([a.name],!1)})}))}fadeIn(e,t){return E(this,void 0,void 0,(function*(){const a=yield this.api.getMeshByName(e);this.api.updateMaterial(a.material,{opacity:"0.0"}),this.api.setVisibility([a.name],!0),this.animate(t,this.easeInQuad,e=>{const t=this.lerp([0,0,0],[1,0,0],e),i={opacity:`${t[0]}`};this.api.updateMaterial(a.material,i)})}))}moveObjectsIncrementally(e,t,a){return E(this,void 0,void 0,(function*(){for(let i=0;i<e.length;i++){const E=e[i],s=yield this.api.getPosition(E);setTimeout(()=>{this.animate(a,this.easeOutQuad,e=>{const a=this.lerp(s,[s[0]+t[0],s[1]+t[1],s[2]+t[2]],e);this.api.setPositionAbsolute(E,a)})},i*a)}}))}swipeObject(e,t,a,i){return E(this,void 0,void 0,(function*(){const E=yield this.api.getMeshByName(e),s=yield this.api.getPosition(E.name);"in"===i?(this.fadeIn(E.name,a),setTimeout(()=>{this.animate(a,this.easeOutQuad,e=>{const a=this.lerp(s,[s[0]+t[0],s[1]+t[1],s[2]+t[2]],e);this.api.setPositionAbsolute(E.name,a)})},a/2)):(this.animate(a,this.easeInQuad,e=>{const a=this.lerp(s,[s[0]+t[0],s[1]+t[1],s[2]+t[2]],e);this.api.setPositionAbsolute(E.name,a)}),setTimeout(()=>{this.fadeOut(E.name,a)},a/2))}))}animateRotation(e,t,a){return new Promise((i,s)=>E(this,void 0,void 0,(function*(){try{const E=yield this.api.getRotation(e);null===E&&i(),this.animate(a,"linear",a=>{const i=[E[0]+t[0]*a,E[1]+t[1]*a,E[2]+t[2]*a];this.api.setRotationAbsolute(e,i)},()=>{this.api.setRotationAbsolute(e,[E[0],E[1],E[2]]),i()})}catch(e){s(e)}})))}getElementVisible(e,t){const a=e.top>=0&&t-e.top>0,i=e.bottom>=0&&t-e.bottom>0;if(!a&&!i)return[0,0];const E=e.top+e.height/2,s=t-E,n=s<0||s>t?0:Math.round(E/t*100);return a&&i?[100,n]:a?[Math.round((t-e.top)/e.height*100),n]:[Math.round((e.height- -1*e.top)/e.height*100),n]}}}});void 0===Vectary&&void 0;const _Vectary$VctrApi=Vectary["VctrApi"];export{_Vectary$VctrApi as VctrApi};